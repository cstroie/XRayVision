<!DOCTYPE html>
<html data-theme="dark" lang="en">
<!--
  XRayVision - Async DICOM processor with OpenAI and WebSocket dashboard.
  Copyright (C) 2025 Costin Stroie <costinstroie@eridu.eu.org>

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  any later version.
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>XRayVision About</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.colors.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.slate.min.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon-64x64.png" type="image/png" sizes="64x64">
    <style>
        :root {
            --pico-font-family-sans-serif: Inter, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, Helvetica, Arial, "Helvetica Neue", sans-serif, var(--pico-font-family-emoji);
            --pico-font-size: 87.5%;
            --pico-line-height: 1.6;
            --pico-border-radius: 0.5rem;
            --card-border-radius: 0.75rem;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --card-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        @media (min-width: 576px) {
            :root {
                --pico-font-size: 100%;
            }
        }

        @media (min-width: 768px) {
            :root {
                --pico-font-size: 106.25%;
            }
        }

        @media (min-width: 1024px) {
            :root {
                --pico-font-size: 112.5%;
            }
        }

        @media (min-width: 1280px) {
            :root {
                --pico-font-size: 118.75%;
            }
        }

        @media (min-width: 1536px) {
            :root {
                --pico-font-size: 125%;
            }
        }

        h1, h2, h3, h4, h5, h6 {
            --pico-font-weight: 600;
        }

        article {
            border: 1px solid var(--pico-muted-border-color);
            border-radius: var(--card-border-radius);
            box-shadow: var(--card-shadow);
            transition: box-shadow 0.2s ease;
        }

        article:hover {
            box-shadow: var(--card-shadow-hover);
        }

        article>footer {
            border-radius: var(--card-border-radius);
        }

        main {
            background-color: var(--pico-background-color);
            padding: 2rem;
            border-radius: var(--card-border-radius);
            box-shadow: var(--card-shadow);
            margin-bottom: 1.5rem;
        }

        main h2 {
            margin-top: 2rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--pico-muted-border-color);
        }

        main h2:first-child {
            margin-top: 0;
        }

        ul {
            background-color: rgba(30, 30, 40, 0.3);
            padding: 1.5rem;
            border-radius: var(--pico-border-radius);
        }

        footer {
            text-align: center;
            padding: 1.5rem;
            background-color: var(--pico-background-color);
            border-radius: var(--card-border-radius);
            box-shadow: var(--card-shadow);
        }

        .feature-list li {
            margin-bottom: 0.5rem;
        }

        .config-table {
            width: 100%;
            border-collapse: collapse;
        }

        .config-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--pico-muted-border-color);
        }

        .config-table td:first-child {
            font-weight: 600;
            width: 30%;
        }

        .config-table td:last-child {
            word-break: break-all;
        }

        .loading {
            color: var(--pico-muted-color);
            font-style: italic;
        }

        .config-section {
            margin-top: 2rem;
        }

        .config-section h3 {
            margin-bottom: 1rem;
        }
        
        .version-info {
            text-align: center;
            margin: 1rem 0;
            color: var(--pico-muted-color);
            font-size: 0.9rem;
        }
    </style>
</head>
<body class="container">
    <nav>
        <ul>
            <li><strong>XRayVision</strong></li>
        </ul>
        <ul>
            <li><a href="/">Dashboard</a></li>
            <li><a href="/stats">Statistics</a></li>
            <li><a href="/about" class="contrast">About</a></li>
        </ul>
    </nav>
    <main>
        <div class="version-info">
            <p>Version 1.0.0 | Open Source Medical Imaging Platform</p>
        </div>
        
        <h2>What is XRayVision?</h2>
        <p>XRayVision is an open-source medical imaging platform that helps radiologists by automatically analyzing X-rays using AI. It's designed to make radiology workflows faster and more efficient by providing real-time analysis and review capabilities.</p>
        
        <h2>Key Features</h2>
        <ul class="feature-list">
            <li><strong>AI-Powered Analysis</strong> - Uses OpenAI (with backup) to intelligently interpret images</li>
            <li><strong>DICOM Compatibility</strong> - Works seamlessly with medical imaging systems</li>
            <li><strong>Real-Time Dashboard</strong> - See live updates as images are processed</li>
            <li><strong>Smart Database</strong> - Stores exams with filtering and review capabilities</li>
            <li><strong>Detailed Analytics</strong> - Track performance with anatomical breakdowns</li>
            <li><strong>Automatic Retrieval</strong> - Pulls studies from PACS every 15 minutes</li>
            <li><strong>Instant Notifications</strong> - Get alerts for critical findings via ntfy.sh</li>
            <li><strong>Image Enhancement</strong> - Automatically optimizes X-ray images for viewing</li>
            <li><strong>Quality Control</strong> - Review and validate AI reports for accuracy</li>
            <li><strong>Modern Design</strong> - Fast, responsive interface built with modern web tech</li>
        </ul>
        
        <h2>How It Works</h2>
        <p>XRayVision streamlines radiology workflows through a simple 4-step process:</p>
        
        <h3>1. Data Ingestion</h3>
        <p>Receives X-rays from medical systems in two ways:</p>
        <ul>
            <li><strong>Direct Transfer</strong> - DICOM studies are sent directly to XRayVision</li>
            <li><strong>Auto Fetch</strong> - Automatically pulls recent studies every 15 minutes (or on-demand)</li>
        </ul>
        
        <h3>2. Image Processing</h3>
        <p>Each X-ray gets optimized for analysis:</p>
        <ul>
            <li><strong>Format Conversion</strong> - Converts DICOM to web-friendly PNG</li>
            <li><strong>Image Enhancement</strong> - Automatically adjusts contrast and brightness</li>
            <li><strong>Metadata Extraction</strong> - Pulls patient info and study details</li>
        </ul>
        
        <h3>3. AI Analysis</h3>
        <p>The smart part - AI examines each X-ray:</p>
        <ul>
            <li><strong>Body Part Detection</strong> - Figures out what body part is in the image</li>
            <li><strong>Smart Questions</strong> - Asks the AI specific questions based on the body part</li>
            <li><strong>Backup System</strong> - Uses a secondary AI if the primary one is down</li>
            <li><strong>Structured Reports</strong> - Creates clean, standardized reports</li>
        </ul>
        
        <h3>4. Results &amp; Review</h3>
        <p>Processed studies appear in an easy-to-use dashboard:</p>
        <ul>
            <li><strong>Live Updates</strong> - See new results as they come in</li>
            <li><strong>Interactive Review</strong> - Confirm or correct AI findings</li>
            <li><strong>Quality Tracking</strong> - Tracks how often AI is right or wrong</li>
            <li><strong>Instant Alerts</strong> - Critical findings trigger immediate notifications</li>
        </ul>
        
        <div class="config-section">
            <h3>System Configuration</h3>
            <article>
                <table class="config-table" role="grid">
                    <tbody>
                        <tr>
                            <td>Primary AI Endpoint</td>
                            <td id="openai-primary" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Backup AI Endpoint</td>
                            <td id="openai-secondary" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Model Name</td>
                            <td id="model-name" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Notification URL</td>
                            <td id="ntfy-url" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Local AE Title</td>
                            <td id="ae-title" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Local AE Port</td>
                            <td id="ae-port" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Remote AE Title</td>
                            <td id="remote-ae-title" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Remote AE IP</td>
                            <td id="remote-ae-ip" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Remote AE Port</td>
                            <td id="remote-ae-port" class="loading">Loading...</td>
                        </tr>
                        <tr>
                            <td>Dashboard Port</td>
                            <td id="dashboard-port" class="loading">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </article>
        </div>
    </main>
    <footer>
        <small>Built with ❤️ by Costin Stroie | Licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.html">GPLv3</a> | 2025</small>
    </footer>
    
    <script>
        // Fetch global parameters from the server
        fetch('/api/config')
            .then(response => response.json())
            .then(data => {
                document.getElementById('openai-primary').textContent = data.OPENAI_URL_PRIMARY || 'Not configured';
                document.getElementById('openai-secondary').textContent = data.OPENAI_URL_SECONDARY || 'Not configured';
                document.getElementById('model-name').textContent = data.MODEL_NAME || 'Not configured';
                document.getElementById('ntfy-url').textContent = data.NTFY_URL || 'Not configured';
                document.getElementById('ae-title').textContent = data.AE_TITLE || 'Not configured';
                document.getElementById('ae-port').textContent = data.AE_PORT || 'Not configured';
                document.getElementById('remote-ae-title').textContent = data.REMOTE_AE_TITLE || 'Not configured';
                document.getElementById('remote-ae-ip').textContent = data.REMOTE_AE_IP || 'Not configured';
                document.getElementById('remote-ae-port').textContent = data.REMOTE_AE_PORT || 'Not configured';
                document.getElementById('dashboard-port').textContent = data.DASHBOARD_PORT || 'Not configured';
            })
            .catch(error => {
                console.error('Error fetching config:', error);
                const loadingElements = document.querySelectorAll('.loading');
                loadingElements.forEach(el => el.textContent = 'Error loading configuration');
            });
    </script>
</body>
</html>
